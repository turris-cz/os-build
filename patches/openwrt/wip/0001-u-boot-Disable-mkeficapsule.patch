From daa39a9c8a19abd4f7d0ac294fcc94878a79c551 Mon Sep 17 00:00:00 2001
From: Michal Hrusecky <michal.hrusecky@turris.com>
Date: Wed, 28 Aug 2024 14:08:39 +0200
Subject: [PATCH] u-boot: Disable mkeficapsule

It depends on gnutls, which we can not rely on being present and we
don't need it anyway.
---
 include/u-boot.mk | 1 +
 1 file changed, 1 insertion(+)

diff --git a/include/u-boot.mk b/include/u-boot.mk
index 8945e8e2b8..8723d40fd3 100644
--- a/include/u-boot.mk
+++ b/include/u-boot.mk
@@ -83,6 +83,7 @@ endef
 
 define Build/Configure/U-Boot
 	+$(MAKE) $(PKG_JOBS) -C $(PKG_BUILD_DIR) $(UBOOT_CONFIGURE_VARS) $(UBOOT_CONFIG)_config
+	sed -i 's|^CONFIG_TOOLS_MKEFICAPSULE=*|# CONFIG_TOOLS_MKEFICAPSULE is not set|' $(PKG_BUILD_DIR)/.config
 endef
 
 DTC=$(wildcard $(LINUX_DIR)/scripts/dtc/dtc)
-- 
2.46.0

